<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:pro="http://www.liquibase.org/xml/ns/pro"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd
      http://www.liquibase.org/xml/ns/pro
      http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd">

	<changeSet id="init_payment_header_table" author="auth">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="payment_header" />
			</not>
		</preConditions>
		<sql splitStatements="true" stripComments="true">
			CREATE TABLE IF NOT EXISTS payment_header (
			payment_header_id character
			varying(40) NOT NULL,
			payment_method varchar(40),
			profile_id
			varchar(40),
			order_number varchar(40),
			order_ref varchar(40),
			payment_details jsonb,
			currency_code varchar(10),
			gateway_indicator
			varchar(40),
			state varchar(40),
			state_detail varchar(255),
			site_id varchar(10),
			submitted_date timestamp,
			last_modified_date timestamp,
			last_modified_by varchar(255),
			retry_count bigint ,
			billing_address_id
			bigint ,
			reference1 varchar(255),
			reference2 varchar(255),
			reference3
			varchar(255),
			reference4 varchar(255),
			CONSTRAINT payment_header_pkey
			PRIMARY KEY (payment_header_id),
			CONSTRAINT billing_address_fkey FOREIGN KEY (billing_address_id)
			REFERENCES public.billing_address (billing_address_id) MATCH SIMPLE
			ON UPDATE NO ACTION
			ON DELETE NO ACTION
			);
		</sql>
	</changeSet>
</databaseChangeLog>